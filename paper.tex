\documentclass{llncs}

\usepackage{url}
\usepackage{xspace}

\newcommand{\OpenTheory}{OpenTheory\xspace}
\newcommand{\secref}[1]{Section~\ref{sec:#1}}

\begin{document}

\title{Standalone Tactics using OpenTheory}

\author{Ramana Kumar\thanks{supported by the Gates Cambridge Trust}\inst{1}\and Joe Hurd\inst{2}}

\institute{\email{Ramana.Kumar@cl.cam.ac.uk}\and\email{joe@galois.com}}

\maketitle

\begin{abstract}
Tactics, functions that compute low-level inferences to achieve a high-level reasoning goal, are usually developed within and tied to a particular proof assistant, which leads to code duplication across different systems and inhibits reuse.
As formal methods are applied to larger problems, projects spanning multiple proof assistants benefit more from interoperability and access to the union of all implemented tactics.
Using the OpenTheory proof exchange format, we show how to turn a tactic implemented for one system into one available to many via the web.
This enables, for example, LCF-style proof reconstruction efforts for fast automatic provers to be shared by users of multiple proof assistants and removes the need for each user to install the automatic prover.
\end{abstract}

\section{Introduction}
There are many systems for interactively developing machine-checked formal theories, including HOL4~\cite{slind08brief}, HOL Light~\cite{DBLP:conf/tphol/Harrison09a}, ProofPower~\cite{ProofPower}, Isabelle/HOL~\cite{wenzel08isabelle}, and Coq~\cite{bertot08short}.
%All but the last are based on higher-order logic~\cite{church40formulation,gordon94hol} and follow the LCF tradition~\cite{gordon79lcf} wherein theorems are represented by an abstract datatype all of whose constructors, representing inference rules, are contained in a small, trusted kernel.
%In LCF-style provers, powerful proof procedures are kept trustworthy by, ultimately, only calling kernel functions to create theorems.
The logic implemented by these systems (except Coq) is essentially the same, but the collections of libraries and tactics built atop the logical kernels differ.
Where similar functionality exists in two systems it is usually the result of duplicate effort.

For instance, Kumar and Weber~\cite{DBLP:conf/itp/KumarW11} and Kun\v{c}ar~\cite{DBLP:conf/itp/Kuncar11} give independent integrations of a quantified boolean formula solver into a higher-order logic based system (HOL4 in one case and HOL Light in the other).
Weber and Amjad~\cite{weber09efficiently} give high-performance integrations of SAT solvers into three HOL-based systems (HOL4, HOL Light, and Isabelle/HOL); each integration requires a separate implementation.
<Metis integrated many times separately; currenty HOL4 version is very old and upgrading would be painful>
<Sledgehammer~\cite{DBLP:journals/japll/MengP09,Paulson_threeyears} is available for Isabelle only, but the ideas behind it don't intrinsically exclude HOL4, HOL Light, etc.>
<TFL, function package,>
Certain kinds of functionality, or improvements in functionality (e.g. Isabelle function package over TFL) become restricted to a single proof assistant unnecessarily.
<datatype packages>
<arithmetic decision procedures>

We contend that tactics or libraries for proof assistants need only be written and maintained in one place rather than once per system. 
An added advantage when the tactic is an integration of an external tool is that a user of the proof assistant need not also have installed the external tool, because a standalone tactic can be accessed from a web server where the tool is installed.

\OpenTheory~\cite{hurd2009} is designed for storing and sharing higher-order logic theories.
By using \OpenTheory to communicate to tactics (sending goals and receiving proofs), we obtain
\begin{enumerate}
\item
A standard format (article files) for goals and proofs, and
\item
An extensible way to fix the meaning of constants and type definitions.
\end{enumerate}

The contributions of this rough diamond are:
\begin{itemize}
\item
A method (\secref{implementation}) for making existing libraries standalone, using the \OpenTheory article format, including working examples online; and,
\item
Preliminary performance data (\secref{performance}) comparing standalone tactics against direct implementations.
\end{itemize}

\section{Making Existing Tactics into Web Services}
\label{sec:implementation}

\subsection{\OpenTheory for Tactic Communication}
Introduction to article format.
Representing terms and proofs in the format.
Viewing tactics as derived inference rules.

\subsection{Isolating tactics from their home systems}
Implementation details to make standalone.
<requires opentheory reader and writer for the system. so far accomplished by instrumenting the kernel to log primitive inferences. this is work, but has the additional benefit of allowing import/export of theories in opentheory repositories>
<either use Polyml.export or checkpointing to capture a function that reads a goal article, runs the tactic (recording the proof), and writes the proof article back>

Implementation details to put on the web.
<simple cgi - worth mentioning?>

\section{Preliminary Performance Results}
\label{sec:performance}

Speed comparisons against using built-in tactics.
<compare builtin holqbf, holqbf with builtin minisat, and holqbf with external minisat (i.e. chain of two webtactics) on a simple and difficult qbf problem>

Amount of code and time required, compared to porting tactics at the implementation level.

\section{Related Work}

System on TPTP~\cite{DBLP:conf/lpar/Sutcliffe10}.
<Comparison to THF?>
Evidential tool bus~\cite{DBLP:conf/icfem/Rushby05,fk:etb}.
Omega.
Natural extension of the integration of automatic tools into interactive systems.

\section{Conclusions}

Additional (non-proof) work tactics might also do needs to be represented on another channel.

Highly customised tactics for a particular proof system might suffer performance hits if the factorisation through the OpenTheory kernel cannot be done efficiently.
By the same token, the article format might admit optimisation by restructuring low-level proofs, and such optimisers could be widely applied.

\bibliographystyle{splncs}
\bibliography{paper}

\end{document}
